var t,e,s,i,n,a,r,l,o=this&&this.__classPrivateFieldSet||function(t,e,s){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,s),s},h=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};export default class b extends HTMLElement{constructor(){super(),t.set(this,null),e.set(this,void 0),s.set(this,[]),i.set(this,[]),n.set(this,0),a.set(this,void 0),r.set(this,void 0),l.set(this,void 0);try{o(this,t,sessionStorage)}catch(t){console.info("Storage access blocked.")}const h='\n\t\t\t:host {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.tablist > slot {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: flex-end;\n\t\t\t}\n\n\t\t\t.tabpanels ::slotted([aria-hidden="true"]) {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t',b=this.attachShadow({mode:"open"});if(b.innerHTML='\n\t\t\t<div id="tablist" class="tablist" role="tablist">\n\t\t\t\t<slot id="tab-slot" name="tab"></slot>\n\t\t\t</div>\n\t\t\t<div class="tabpanels">\n\t\t\t\t<slot id="tabpanel-slot" name="tabpanel"></slot>\n\t\t\t</div>\n\t\t',void 0!==b.adoptedStyleSheets){const t=new CSSStyleSheet;t.replaceSync(h),b.adoptedStyleSheets=[t]}else b.innerHTML+=`<style>${h}</style>`;o(this,e,this.shadowRoot?.getElementById("tablist")),o(this,a,this._tabClickEvent.bind(this)),o(this,r,this._tabKeydownEvent.bind(this)),o(this,l,this._tabpanelKeydownEvent.bind(this))}static get observedAttributes(){return["tablist-label","storage-key"]}connectedCallback(){o(this,s,this.shadowRoot?.getElementById("tab-slot").assignedNodes({flatten:!0})),o(this,i,this.shadowRoot?.getElementById("tabpanel-slot").assignedNodes({flatten:!0}));const b=this.tablistLabel;if(null!==b&&h(this,e).setAttribute("aria-label",b),h(this,s).forEach(((t,e)=>{const s=t.href;if(""===s)throw new Error("Attribute: `href` is not set.");const i=new URL(s).hash;if(""===i)throw new Error("Attribute: `href` does not contain hash.");const n=decodeURIComponent(i.substring(1)),o=document.getElementById(n);if(null===o)throw new Error(`Element: #${n} can not found.`);const b=this._getTabElementId(e);t.removeAttribute("href"),t.id=b,t.setAttribute("role","tab"),t.setAttribute("aria-controls",n),o.setAttribute("role","tabpanel"),o.setAttribute("aria-labelledby",b),t.addEventListener("click",h(this,a),{passive:!0}),t.addEventListener("keydown",h(this,r)),o.addEventListener("keydown",h(this,l))})),null!==h(this,t)){const e=this.storageKey;if(null!==e){const s=h(this,t).getItem(e);if(null!==s){const t=document.getElementById(s);null===t?console.info(`Element: #${s} can not found.`):o(this,n,h(this,i).indexOf(t))}}}this._selectTab(h(this,n))}disconnectedCallback(){for(const t of h(this,s))t.removeEventListener("click",h(this,a)),t.removeEventListener("keydown",h(this,r));for(const t of h(this,i))t.removeEventListener("keydown",h(this,l))}attributeChangedCallback(t,s,i){switch(t){case"tablist-label":h(this,e).setAttribute("aria-label",i)}}get tablistLabel(){return this.getAttribute("tablist-label")}set tablistLabel(t){if(null!==t){if("string"!=typeof t)throw new TypeError(`Only a string value can be specified for the \`tablist-label\` attribute of the <${this.localName}> element.`);this.setAttribute("tablist-label",t)}else this.removeAttribute("tablist-label")}get storageKey(){return this.getAttribute("storage-key")}set storageKey(t){if(null!==t){if("string"!=typeof t)throw new TypeError(`Only a string value can be specified for the \`storage-key\` attribute of the <${this.localName}> element.`);this.setAttribute("storage-key",t)}else this.removeAttribute("storage-key")}_getTabElementId(t){return`tab-${String(t+1)}`}_tabClickEvent(t){this._changeTab(h(this,s).indexOf(t.currentTarget))}_tabKeydownEvent(t){switch(t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault(),this._changeTab(h(this,n)<1?h(this,s).length-1:h(this,n)-1);break;case"ArrowRight":case"ArrowDown":t.preventDefault(),this._changeTab(h(this,n)>=h(this,s).length-1?0:h(this,n)+1);break;case"End":t.preventDefault(),this._changeTab(h(this,s).length-1);break;case"Home":t.preventDefault(),this._changeTab(0)}}_tabpanelKeydownEvent(t){switch(t.key){case"ArrowLeft":case"ArrowUp":t.ctrlKey&&(t.preventDefault(),h(this,s)[h(this,n)].focus())}}_selectTab(t){h(this,s).forEach(((e,s)=>{const n=s===t;e.tabIndex=n?0:-1,e.setAttribute("aria-selected",String(n)),e.setAttribute("aria-expanded",String(n)),h(this,i)[s].setAttribute("aria-hidden",String(!n))})),o(this,n,t)}_changeTab(e){this._selectTab(e),h(this,s)[e].focus(),null!==h(this,t)&&null!==this.storageKey&&h(this,t).setItem(this.storageKey,h(this,i)[e].id)}}t=new WeakMap,e=new WeakMap,s=new WeakMap,i=new WeakMap,n=new WeakMap,a=new WeakMap,r=new WeakMap,l=new WeakMap;